namespace bndBuffer:
    // @author: Gareth Callanan
    //
    // Entity that creates the P prodcuer actors, C consumer actors and connects them all to a
    // central buffer actors.
    network BndBufferNetwork() ==> :
    entities
        producers = [Producer(numItemsPerProducer=numItemsPerProducer, prodCost=prodCost): for i in 0..P-1];
        consumers = [Consumer(consCost=consCost): for i in 0..C-1];
        buffer = Buffer(B=B, P=P, C=C);
    structure
        foreach uint i in 0..P-1 do
            producers[i].Out --> buffer.FromProducer[i];
            buffer.ToProducer[i] --> producers[i].In;
        end

        foreach uint i in 0..C-1 do
            consumers[i].Out --> buffer.FromConsumer[i];
            buffer.ToConsumer[i] --> consumers[i].In;
        end
    end

end